{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport styles from './Sidebar.module.css';\nimport { useRouter } from 'next/router';\nimport { useAuth, withAuth } from 'use-auth0-hooks';\nimport Skeleton from 'react-loading-skeleton';\n\nfunction Sidebar({\n  tags,\n  getPostByTag,\n  auth,\n  searchPosts,\n  getReadingList\n}) {\n  const {\n    pathname,\n    query\n  } = useRouter();\n  const {\n    isLoading,\n    login,\n    logout\n  } = useAuth();\n  const {\n    user\n  } = auth; // handle tags - create a unique list to display\n\n  const tagsList = new Set();\n  tags.map(arr => arr.map(tag => tagsList.add(tag)));\n  const tagsArr = Array.from(tagsList); //handle search state \n\n  const {\n    0: term,\n    1: setTerm\n  } = useState();\n\n  const clickHandler = evt => {\n    getPostByTag(evt.target.value);\n  };\n\n  const readingClickHandler = evt => {\n    getReadingList(user);\n  };\n\n  const searchSubmit = e => {\n    event.stopPropagation();\n    e.preventDefault();\n    searchPosts(term);\n    setTerm('');\n  };\n\n  const handleChange = e => {\n    setTerm(e.target.value);\n  };\n\n  return __jsx(\"div\", {\n    className: styles.sidebar\n  }, isLoading ? __jsx(\"div\", null, __jsx(Skeleton, {\n    count: 11\n  })) : user ? __jsx(\"div\", {\n    className: styles.sidebar_profile\n  }, __jsx(\"img\", {\n    className: styles.sidebar_img,\n    src: user.picture\n  }), __jsx(\"div\", {\n    className: styles.sidebar_name\n  }, \" \", user.nickname || user.name), __jsx(\"div\", {\n    className: styles.sidebar_reading,\n    onClick: readingClickHandler\n  }, \"\\uD83D\\uDCDA Reading list\"), __jsx(\"button\", {\n    className: styles.sidebar_login,\n    onClick: () => logout({\n      returnTo: 'http://localhost:3000'\n    })\n  }, \"Logout\")) : __jsx(\"div\", {\n    className: styles.sidebar_profile\n  }, __jsx(\"div\", {\n    className: styles.sidebar_tagline\n  }, \"Stagetime is a community of comedians.\"), __jsx(\"div\", {\n    className: styles.sidebar_text\n  }, \" Sign in below to write a post and join the discussion.\"), __jsx(\"div\", {\n    className: styles.sidebar_login,\n    onClick: () => login({\n      appState: {\n        returnTo: {\n          pathname,\n          query\n        }\n      }\n    })\n  }, \"Sign in\")), __jsx(\"form\", {\n    className: styles.sidebar_search,\n    onSubmit: searchSubmit\n  }, __jsx(\"input\", {\n    className: styles.sidebar_search_input,\n    type: \"text\",\n    placeholder: \"Search posts...\",\n    onChange: handleChange,\n    value: term,\n    id: \"searchPosts\"\n  })), __jsx(\"div\", {\n    className: styles.sidebar_title\n  }, \"Filter feed by tag\"), __jsx(\"div\", {\n    className: styles.sidebar_tags\n  }, tagsArr.map(tag => __jsx(\"button\", {\n    className: styles.sidebar_tag,\n    value: tag,\n    onClick: clickHandler\n  }, `#${tag.toLowerCase()}`))));\n}\n\nexport default withAuth(Sidebar);","map":null,"metadata":{},"sourceType":"module"}