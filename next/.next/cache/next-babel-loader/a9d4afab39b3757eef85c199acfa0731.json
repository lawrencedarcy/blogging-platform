{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport styles from './Card.module.css';\nimport Moment from 'react-moment';\nimport Link from 'next/link';\nimport { useAuth, withAuth } from 'use-auth0-hooks';\n\nfunction Card(_ref) {\n  var post = _ref.post,\n      addToList = _ref.addToList,\n      auth = _ref.auth,\n      feedState = _ref.feedState,\n      deleteFromList = _ref.deleteFromList,\n      checkReadingList = _ref.checkReadingList;\n\n  var _useAuth = useAuth(),\n      login = _useAuth.login,\n      isLoading = _useAuth.isLoading;\n\n  var user = auth.user;\n\n  var _useState = useState(false),\n      isClicked = _useState[0],\n      setIsClicked = _useState[1];\n\n  var _useState2 = useState(false),\n      onList = _useState2[0],\n      setOnList = _useState2[1];\n\n  useEffect(function () {\n    if (user) {\n      checkReadingList(user, post._id).then(function (isOnList) {\n        return setOnList(isOnList);\n      });\n    }\n  }, [user]);\n\n  var clickHandler = function clickHandler(e) {\n    console.log(post._id);\n    user ? addToList(user, post._id) : login();\n    setOnList(true);\n  };\n\n  return __jsx(\"div\", {\n    className: styles.card_width\n  }, __jsx(\"div\", {\n    className: styles.feed_card_inner\n  }, __jsx(Link, {\n    href: \"/post/\".concat(post._id)\n  }, __jsx(\"div\", {\n    className: styles.card_link_block\n  }, __jsx(\"img\", {\n    src: post.img_url,\n    className: styles.card_img\n  }), __jsx(\"div\", {\n    className: styles.card_title\n  }, post.title), post.tags.length > 0 && __jsx(\"div\", {\n    className: styles.card_tags\n  }, post.tags.slice(0, 3).map(function (tag) {\n    return __jsx(\"div\", {\n      className: styles.tag\n    }, '#' + tag);\n  })), __jsx(\"div\", {\n    className: styles.card_line\n  }, __jsx(\"div\", {\n    className: styles.card_author\n  }, post.author, \" \"), __jsx(\"div\", {\n    className: styles.card_timestamp\n  }, __jsx(\"div\", null, __jsx(Moment, {\n    format: \"LL\"\n  }, post.timestamp))))))), __jsx(\"div\", {\n    className: styles.card_bottom\n  }, __jsx(Link, {\n    href: \"/post/\".concat(post._id)\n  }, __jsx(\"div\", {\n    className: styles.votes_bottom\n  }, __jsx(\"img\", {\n    className: styles.card_upvote,\n    src: \"https://uploads.guim.co.uk/2020/04/15/culture.png\"\n  }), __jsx(\"div\", {\n    className: styles.card_votes\n  }, post.votes))), feedState === 'list' ? __jsx(\"div\", {\n    className: styles.card_btn,\n    onClick: function onClick() {\n      return deleteFromList(user, post._id);\n    }\n  }, \"\\uD83D\\uDCDA Remove\") : !isLoading && __jsx(\"div\", {\n    className: onList ? styles.card_btn_clicked : styles.card_btn,\n    onClick: function onClick() {\n      return clickHandler();\n    }\n  }, onList ? 'ðŸ“š Saved' : 'ðŸ“š Save')));\n}\n\nexport default withAuth(Card);","map":null,"metadata":{},"sourceType":"module"}