{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport styles from './Sidebar.module.css';\nimport { useRouter } from 'next/router';\nimport { useAuth, withAuth } from 'use-auth0-hooks';\nimport Skeleton from 'react-loading-skeleton';\n\nfunction Sidebar(_ref) {\n  var tags = _ref.tags,\n      getPostByTag = _ref.getPostByTag,\n      auth = _ref.auth,\n      searchPosts = _ref.searchPosts,\n      getReadingList = _ref.getReadingList;\n\n  var _useRouter = useRouter(),\n      pathname = _useRouter.pathname,\n      query = _useRouter.query;\n\n  var _useAuth = useAuth(),\n      isLoading = _useAuth.isLoading,\n      login = _useAuth.login,\n      logout = _useAuth.logout;\n\n  var user = auth.user; // handle tags - create a unique list to display\n\n  var tagsList = new Set();\n  tags.map(function (arr) {\n    return arr.map(function (tag) {\n      return tagsList.add(tag);\n    });\n  });\n  var tagsArr = Array.from(tagsList); //handle search state \n\n  var _useState = useState(),\n      term = _useState[0],\n      setTerm = _useState[1];\n\n  var clickHandler = function clickHandler(evt) {\n    getPostByTag(evt.target.value);\n  };\n\n  var readingClickHandler = function readingClickHandler(evt) {\n    getReadingList(user);\n  };\n\n  var searchSubmit = function searchSubmit(e) {\n    event.stopPropagation();\n    e.preventDefault();\n    searchPosts(term);\n    setTerm('');\n  };\n\n  var handleChange = function handleChange(e) {\n    setTerm(e.target.value);\n  };\n\n  return __jsx(\"div\", {\n    className: styles.sidebar\n  }, isLoading ? __jsx(\"div\", null, __jsx(Skeleton, {\n    count: 11\n  })) : user ? __jsx(\"div\", {\n    className: styles.sidebar_profile\n  }, __jsx(\"img\", {\n    className: styles.sidebar_img,\n    src: user.picture\n  }), __jsx(\"div\", {\n    className: styles.sidebar_name\n  }, \" \", user.nickname || user.name), __jsx(\"div\", {\n    className: styles.sidebar_reading,\n    onClick: readingClickHandler\n  }, \"\\uD83D\\uDCDA Reading list\"), __jsx(\"button\", {\n    className: styles.sidebar_login,\n    onClick: function onClick() {\n      return logout({\n        returnTo: 'http://localhost:3000'\n      });\n    }\n  }, \"Logout\")) : __jsx(\"div\", {\n    className: styles.sidebar_profile\n  }, __jsx(\"div\", {\n    className: styles.sidebar_tagline\n  }, \"Stagetime is a community of comedians.\"), __jsx(\"div\", {\n    className: styles.sidebar_text\n  }, \" Sign in below to write a post and join the discussion.\"), __jsx(\"div\", {\n    className: styles.sidebar_login,\n    onClick: function onClick() {\n      return login({\n        appState: {\n          returnTo: {\n            pathname: pathname,\n            query: query\n          }\n        }\n      });\n    }\n  }, \"Sign in\")), __jsx(\"form\", {\n    className: styles.sidebar_search,\n    onSubmit: searchSubmit\n  }, __jsx(\"input\", {\n    className: styles.sidebar_search_input,\n    type: \"text\",\n    placeholder: \"Search posts...\",\n    onChange: handleChange,\n    value: term,\n    id: \"searchPosts\"\n  })), __jsx(\"div\", {\n    className: styles.sidebar_title\n  }, \"Filter feed by tag\"), __jsx(\"div\", {\n    className: styles.sidebar_tags\n  }, tagsArr.map(function (tag) {\n    return __jsx(\"button\", {\n      className: styles.sidebar_tag,\n      value: tag,\n      onClick: clickHandler\n    }, \"#\".concat(tag.toLowerCase()));\n  })));\n}\n\nexport default withAuth(Sidebar);","map":null,"metadata":{},"sourceType":"module"}